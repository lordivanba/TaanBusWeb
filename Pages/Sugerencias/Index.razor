@page "/sugerencias"

<PageTitle>Portal sugerencias</PageTitle>

@using taanbus.Data.Models
@using System.Net.Http
@using System.Net.Http.Json
@inject HttpClient http
@inject NavigationManager nav


<h4>Portal de sugerencias</h4>
<hr>
<p>Lorem, ipsum dolor sit amet consectetur adipisicing elit. Laborum sunt, ex tempora similique obcaecati explicabo hic
    placeat soluta dolor praesentium repellat vero sapiente accusantium, eos reiciendis. Dolore nisi iusto eaque!. Lorem
    ipsum dolor sit, amet consectetur adipisicing elit. Commodi odio, velit quo enim earum error ipsam blanditiis
    ducimus, minus cumque ab deleniti. Provident ad delectus pariatur debitis eum labore ut.</p>
<h6>Objetivo</h6>
<p>Lorem ipsum dolor, sit amet consectetur adipisicing elit. Eum iure sunt provident voluptatum expedita consequuntur,
    esse iste ipsam itaque, numquam repudiandae. Veniam odio modi minima voluptatum, consequuntur itaque cum corporis.
</p>
<div class="button_">
    <a class="btn btn-success" href="sugerencia/form">Presentar sugerencia</a>
</div>

<hr>

<h6>Sugerencias registradas</h6>
@if (sugerencias != null)
{
    <table class="table">
        <thead>
            <tr>
                <th scope="col">ID</th>
                <th scope="col">Nombre</th>
                <th scope="col">Apellido</th>
                <th scope="col">Correo</th>
                <th scope="col">Telefono</th>
                <th scope="col">Descripcion</th>
                <th scope="col">Fecha de registro</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var sugerencia in sugerencias)
            {
                <tr>
                    <td scope="col">@sugerencia.Id</td>
                    <td scope="col">@sugerencia.NombreCiudadano</td>
                    <td scope="col">@sugerencia.ApellidosCiudadano</td>
                    <td scope="col">@sugerencia.CorreoCiudadano</td>
                    <td scope="col">@sugerencia.TelefonoCiudadano</td>
                    <td scope="col">@sugerencia.Descripcion</td>
                     <td scope="col">@sugerencia.FechaRegistro</td>
                    <td scope="col">
                        <button class="btn btn-outline-dark" @onclick="() => showSugerencia(sugerencia.Id)"><i><img
                            src="https://img.icons8.com/material-outlined/24/000000/edit--v1.png" /></i></button>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p><em>Cargando...</em></p>
}

@code {
    private readonly string api = "api/sugerencia";
    private IList<SugerenciaModel>? sugerencias;

    protected override async Task OnInitializedAsync()
    {
        sugerencias = await http.GetFromJsonAsync<IList<SugerenciaModel>>(api);
    }
    void showSugerencia(int id){
        nav.NavigateTo($"sugerencia/{id}");
    }

}